var jyutPing = {
  sheet_id : "1oPSzxFPYCQaja_C-mAi5nu-thceSQc3LzXEnkLthSy4",
  api_key : "AIzaSyBdJsthRvTU2R6NqTp-Ty9v53Smza3IduE",
  gid : 0,
  headers : 1,
  start : "A1",
  end: "G",
  dataUrl : function(){
    $set = jyutPing;
    var base_url = "https://docs.google.com/spreadsheets/d/";
    base_url += $set.sheet_id;
    base_url += "/gviz/tq?";
    base_url += "key="+$set.api_key;
    base_url += "&tqx=out:html";
    base_url += "&tq?gid="+$set.gid;
    base_url += "&headers="+$set.headers;
    base_url += "&range="+$set.start+":"+$set.end;
    return base_url;
  },
  search : function(code) {
    $set = jyutPing;
    google.load('visualization', '1', {
        callback: function () {
            var query = new google.visualization.Query($set.dataUrl());
            query.setQuery("select A where B = '"+code+"'");
            query.send($set.searchCallback);
        }
    });
  },
  searchCallback : function(response){
    console.log("callback");
    console.log(response.getDataTable());
  }
}
// var search = function(code) {
//   google.load('visualization', '1', {
//       callback: function () {
//           var query = new google.visualization.Query(jyutPing.dataUrl());
//           query.setQuery("select A where B = '"+code+"'");
//           query.send(displayData);
//       }
//   });
// }
$(document).ready(function(){
  document.getElementById('dataSource').innerHTML = jyutPing.dataUrl();

  jyutPing.search("U+4E00");
  jyutPing.search("U+4E01");
});
